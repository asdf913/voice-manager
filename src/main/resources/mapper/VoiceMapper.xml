<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.VoiceMapper">

	<resultMap id="resultMapVoice" type="domain.Voice">
		<result column="file_path" property="filePath" />
		<result column="file_length" property="fileLength" />
		<result column="file_digest_algorithm"
			property="fileDigestAlgorithm" />
		<result column="file_digest" property="fileDigest" />
		<result column="file_extension" property="fileExtension" />
		<result column="create_ts" property="createTs" />
		<result column="update_ts" property="updateTs" />
	</resultMap>

	<select id="retrieveAll" resultMap="resultMapVoice">
		select
		text,yomi,romaji,hiragana,katakana,file_path,file_length,file_digest_algorithm,file_digest,file_extension,create_ts,update_ts
		from voice
	</select>

	<select id="searchByTextAndRomaji" resultMap="resultMapVoice">
		select
		text,yomi,romaji,hiragana,katakana,file_path,file_length,file_digest_algorithm,file_digest,file_extension,create_ts,update_ts
		from voice
		<where>
			true
			<if test="text==null">and text is null</if>
			<if test="text!=null">and text=#{text}</if>
			<if test="romaji==null">and romaji is null</if>
			<if test="romaji!=null">and romaji=#{romaji}</if>
		</where>
	</select>

	<insert id="insert">
		<if test="voice!=null">
			insert into
			voice(text,yomi,romaji,hiragana,katakana,file_path,file_length,file_digest_algorithm,file_digest,file_extension,create_ts)values(#{voice.text},#{voice.yomi},#{voice.romaji},#{voice.hiragana},#{voice.katakana},#{voice.filePath},#{voice.fileLength},#{voice.fileDigestAlgorithm},#{voice.fileDigest},#{voice.fileExtension},#{voice.createTs});
		</if>
	</insert>

	<update id="update">
		<if test="voice!=null">
			update voice
			<set>
				text=#{voice.text}
				,yomi=#{voice.yomi}
				,romaji=#{voice.romaji}
				,hiragana=#{voice.hiragana}
				,katakana=#{voice.katakana}
				,file_path=#{voice.filePath}
				,file_digest_algorithm=#{voice.fileDigestAlgorithm}
				,file_digest=#{voice.fileDigest}
				,file_extension=#{voice.fileExtension}
				,file_length=#{voice.fileLength}
				,update_ts=#{voice.updateTs}
			</set>
			<where>
				true
				<if test="voice.text==null">and text is null</if>
				<if test="voice.text!=null">and text=#{voice.text}</if>
				<if test="voice.romaji==null">and romaji is null</if>
				<if test="voice.romaji!=null">and romaji=#{voice.romaji}</if>
			</where>
		</if>
	</update>

</mapper>